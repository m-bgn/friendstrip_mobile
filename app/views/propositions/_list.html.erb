<div class="container">
  <h3 class="my-5">Propositions</h3>
  <div class="row" >

    <div class="col-8">
    <% propositions.each do |proposition| %>
      <% case proposition.category %>
      <% when "activity"%>
      <% iconecategory="fa-volleyball-ball" %>
      <% color="activity"%>
      <% when "food"%>
      <% iconecategory="fa-hamburger" %>
      <% color="food"%>
      <% when "accomodation"%>
      <% iconecategory="fa-bed" %>
      <% color="bed"%>
      <% end %>
        <div class="trip-card" >
          <div class="card-proposition-top" id="<%=color%>">
            <div class="row" >
              <i class="fas <%=iconecategory%>"></i>
              <h5><%= proposition.title %></h5>
              <p>by <%= proposition.user.first_name %></p>
            </div>
            <div class="row-2" >
              <p>Due date: <%= proposition.due_date %></p>
            </div>
            </div>
          <div class="card-proposition-bottom">
            <p>Dates: <%= proposition.start_date %> / <%= proposition.end_date %></p>
              <div>
              <!-- Button trigger like vote -->
                <i class='fas fa-thumbs-up' data-target="#likeModal-<%=proposition.id%>" data-toggle="modal"></i>
              <!-- Like modal form -->
                <div class="modal fade" id="likeModal-<%=proposition.id%>" tabindex="-1" role="dialog" aria-labelledby="likeModalLabel-<%=proposition.id%>" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="likeModalLabel-<%=proposition.id%>">Upvote <%=proposition.title%> ?</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <div class="form-wrapper">
                          <%= simple_form_for [proposition, @vote] do |f| %>
                            <%= f.input :comment %>
                            <%= f.input :status, as: :hidden, :input_html => { :value =>  "upvote" } %>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <div type="button" class="button-green" data-dismiss="modal">Close</div>
                        <%= f.button :submit, 'Upvote', class: "button-orange" %>
                        <% end %>
                      </div>
                    </div>
                  </div>
                </div>
              <!-- Button trigger dislike vote -->
              <i class='fas fa-thumbs-down' data-target="#dislikeModal-<%=proposition.id%>" data-toggle="modal"></i>
              <!-- disLike modal form -->
              <div class="modal fade" id="dislikeModal-<%=proposition.id%>" tabindex="-1" role="dialog" aria-labelledby="dislikeModalLabel-<%=proposition.id%>" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="dislikeModalLabel-<%=proposition.id%>">Downvote <%=proposition.title%> ?</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="form-wrapper">
                        <%= simple_form_for [proposition, @vote] do |f| %>
                          <%= f.input :comment %>
                          <%= f.input :status, as: :hidden, :input_html => { :value =>  "downvote" } %>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <div type="button" class="button-green" data-dismiss="modal">Close</div>
                      <%= f.button :submit, 'Upvote', class: "button-orange" %>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="col-4">
      <div id="map"
        style="width: 100%; height: 600px;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%=ENV["MAPBOX_API_KEY"]%>">
      </div>
    </div>
  </div>
</div>


