<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1008&q=80 );">
  <div>
    <div class="container">
          <h1>View your<strong> <%=@trip.title%></strong></h1>
          <p class="date-banner">from <%=@trip.start_date%> to <%=@trip.end_date%></p>
          <div class="show-banner-interactions">
            <%= link_to "Back to all my trips", trips_path, class: "sign-button button-green"%>
            <div class= "">
              <!-- Button trigger modal -->
              <div class="button-invite button-orange button-modal" data-toggle="modal" data-target="#exampleModal">
                Invite a friend
              </div>
            </div>
          </div>
          <div class="navigation-tabs">
            <div class="navigation-tabs-green">
              <div class="pending button-tabs" id="pending-prop">
                <h5>Pending</h5>
              </div>
              <div class="all-steps button-tabs" id="all-prop">
                  <h5>All propositions</h5>
              </div>
            </div>

            <!--  New invitation Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Invite a friend to join <%=@trip.title%></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="form-wrapper" id="invite-form-div">
                      <%= simple_form_for [@trip, @invite] do |f| %>
                        <%= f.input :email, :collection => @emails, label: 'Pick a friend to invite' %>
                    </div>
                  </div>
                    <div class="modal-footer">
                      <div type="button" class="button-green" data-dismiss="modal">Close</div>
                      <%= f.button :submit, 'Send invite', class: "button-orange" %>
                      <% end %>
                    </div>
                </div>
              </div>
            </div>
            <!--  New proposition Modal -->
            <div class="modal fade" id="propositionModal" tabindex="-1" role="dialog" aria-labelledby="propositionModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="propositionModalLabel">Add a proposition to <%=@trip.title%></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <div class="form-wrapper" id="booking-form-div">
                      <%= simple_form_for [@trip, @proposition] do |f| %>
                        <%= f.input :category, :collection => ["food", "accomodation", "activity"], label: 'Pick a category' %>
                        <%= f.input :start_date, label: "SÃ©lectionnez vos dates:", as: :string, required: false, input_html: { id: "range_start", class: "d-none" } %>
                        <%= f.input :end_date, label: false, as: :string, required: false, input_html: { id: "range_end", class: "d-none"  } %>
                        <%= f.input :due_date %>
                        <%= f.input :address, as: :string %>
                        <%= f.input :title %>
                        <%= f.input :description %>
                        <%= f.input :url %>
                    </div>
                  </div>
                    <div class="modal-footer">
                      <div type="button" class="button-green" data-dismiss="modal">Close</div>
                      <div class="">
                        <%= f.button :submit, 'Add proposition', class: "button-orange" %>
                      </div>
                      <% end %>
                    </div>
                </div>
              </div>
            </div>
      </div>
      </div>
    </div>
  </div>
  <div class="pending-prop">

    <div class="trip-owner-show">
      <% if @trip.user.avatar.attached? %>
        <p><%= cl_image_tag @trip.user.avatar.key, width: 60, height: 60, crop: :fill, style: "border-radius: 50%;", class: "image" %></p>
      <% else %>
        <%= image_tag("avatar.png", class: "trip-owner-show") %>
      <% end %>
    </div>

    <div class="trip-invitees-show">
      <% @trip.invites.each do |invite| %>
        <% if invite.user.avatar.attached? %>
          <%= cl_image_tag invite.user.avatar.key, width: 50, height: 50, crop: :fill, class: "trip-invitee-show" %>
        <% else %>
          <%= image_tag("avatar.png", class: "trip-invitee-show") %>
        <% end %>
      <% end %>
    </div>
    <div>
      <%= render "propositions/list", propositions: @trip.propositions.select {|prop| prop.status!="validated"}, map: "map-pending" %>
    </div>
  </div>


  <div class="all-prop d-none">
    <div>
      <%= render "propositions/list", propositions: @trip.propositions.select {|prop| prop.status == "validated"}, map: "map-all" %>
    </div>
  </div>
</div>
</div>
  <!-- Button trigger proposition new modal -->
  <div class="button-add" data-toggle="modal" data-target="#propositionModal" id="bouton-sticky">
    +
  </div>
</div>
